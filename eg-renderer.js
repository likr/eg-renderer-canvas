!function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e){t.exports=d3},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var r=[],o=!0,n=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(r.push(a.value),!e||r.length!==e);o=!0);}catch(t){n=!0,i=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(t,e,r,o,n,i,a){var l=a/2;if(t===r)return[0,i/2+l];var u=Math.abs((e-o)/(t-r)),s=Math.atan(u);if(s<Math.atan2(i/2,n/2+l))return[n/2+l,Math.tan(s)*(n/2+l)];if(s>Math.atan2(i/2+l,n/2))return[Math.tan(Math.PI/2-s)*(i/2+l),i/2+l];var c=-1,d=e-u*t,f=t+n/2,y=e+i/2,p=u*f+c*y+d,h=Math.sqrt((Math.pow(u,2)+Math.pow(c,2))*Math.pow(l,2)-Math.pow(p,2));return[(-u*p-c*h)/(Math.pow(u,2)+Math.pow(c,2))+f-t,(1*p+u*h)/(Math.pow(u,2)+Math.pow(c,2))+y-e]},i=function(t,e,r,o,n,i,a){var l=2*a/3;if(t===r)return[0,i/2+l];var u=Math.abs((e-o)/(t-r)),s=Math.atan(u);return s<Math.atan2(i/2,n/2)?[n/2+Math.cos(s)*l,Math.tan(s)*n/2+Math.sin(s)*l]:[Math.tan(Math.PI/2-s)*i/2+Math.sin(Math.PI/2-s)*l,i/2+Math.cos(Math.PI/2-s)*l]},a=function(t,e,r,o,n,i,a){var l=a/2;if(t===r)return[0,i/2+l];var u=n/2,s=i/2,c=Math.abs((e-o)/(t-r)),d=Math.atan(c),f=u*s/Math.sqrt(Math.pow(c,2)*Math.pow(u,2)+Math.pow(s,2)),y=c*f;return[f+l*Math.cos(d),y+l*Math.sin(d)]},l=function(t,e,r,o,n,i,a){var l=2*a/3;if(t===r)return[0,i/2+l];var u=n/2,s=i/2,c=Math.abs((e-o)/(t-r)),d=Math.atan(c),f=u*s/Math.sqrt(Math.pow(c,2)*Math.pow(u,2)+Math.pow(s,2)),y=c*f;return[f+l*Math.cos(d),y+l*Math.sin(d)]},u=function(t,e,r,o,n,i){return r<n?o<i?[r+t,o+e]:[r+t,o-e]:o<i?[r-t,o+e]:[r-t,o-e]},s=function(t,e,r){return"arc"===r?function(){return[0,0]}:"circle"===t&&"rect"===e?n:"triangle"===t&&"rect"===e?i:"circle"===t&&"circle"===e?a:"triangle"===t&&"circle"===e?l:function(){return[0,0]}};e.adjustEdge=function(t,e,r){var n=t.points,i=t.sourceMarkerShape,a=t.sourceMarkerSize,l=t.targetMarkerShape,c=t.targetMarkerSize,d=n.length,f=s(i,e.type,t.type),y=f(e.x,e.y,n[1][0],n[1][1],e.width,e.height,a),p=o(y,2),h=p[0],k=p[1];n[0]=u(h,k,e.x,e.y,n[1][0],n[1][1]);var g=s(l,r.type,t.type),b=g(r.x,r.y,n[d-2][0],n[d-2][1],r.width,r.height,c),v=o(b,2),S=v[0],m=v[1];n[d-1]=u(S,m,r.x,r.y,n[d-2][0],n[d-2][1])}},function(t,e,r){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});e.layoutRect=function(t){var e=t.vertices;e=Array.from(e.values());var r=Math.min.apply(Math,o(e.map(function(t){return t.x-t.width/2}))),n=Math.max.apply(Math,o(e.map(function(t){return t.x+t.width/2}))),i=Math.min.apply(Math,o(e.map(function(t){return t.y-t.height/2})));return{left:r,top:i,layoutWidth:n-r,layoutHeight:Math.max.apply(Math,o(e.map(function(t){return t.y+t.height/2})))-i}},e.centerTransform=function(t,e,r,o,n,i,a){var l=n-2*a,u=i-2*a,s=l/t,c=u/e,d=Math.min(s,c);return{x:s<c?0:(l-t*d)/2,y:c<s?0:(u-e*d)/2,k:d}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.diff=e.interpolateEdge=e.interpolateVertex=void 0;var o=function(){function t(t,e){var r=[],o=!0,n=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(r.push(a.value),!e||r.length!==e);o=!0);}catch(t){n=!0,i=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=r(0),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n),a=function(t,e,r){return(e-t)*r+t};e.interpolateVertex=function(t,e,r){var o=["u","type","label","d"],n=["x","y","width","height","strokeWidth","labelStrokeWidth","alpha"],l=["fillColor","strokeColor","labelFillColor","labelStrokeColor"],u={},s=!0,c=!1,d=void 0;try{for(var f,y=o[Symbol.iterator]();!(s=(f=y.next()).done);s=!0){var p=f.value;u[p]=e[p]}}catch(t){c=!0,d=t}finally{try{!s&&y.return&&y.return()}finally{if(c)throw d}}var h=!0,k=!1,g=void 0;try{for(var b,v=n[Symbol.iterator]();!(h=(b=v.next()).done);h=!0){var S=b.value;u[S]=a(t[S],e[S],r)}}catch(t){k=!0,g=t}finally{try{!h&&v.return&&v.return()}finally{if(k)throw g}}var m=!0,w=!1,M=void 0;try{for(var P,A=l[Symbol.iterator]();!(m=(P=A.next()).done);m=!0){var x=P.value;u[x]=i.interpolateRgb(t[x],e[x])(r)}}catch(t){w=!0,M=t}finally{try{!m&&A.return&&A.return()}finally{if(w)throw M}}return u},e.interpolateEdge=function(t,e,r){var n=["u","v","type","sourceMarkerShape","targetMarkerShape","label","d"],l=["strokeWidth","sourceMarkerSize","targetMarkerSize","labelStrokeWidth","alpha"],u=["strokeColor","labelFillColor","labelStrokeColor"],s={},c=!0,d=!1,f=void 0;try{for(var y,p=n[Symbol.iterator]();!(c=(y=p.next()).done);c=!0){var h=y.value;s[h]=e[h]}}catch(t){d=!0,f=t}finally{try{!c&&p.return&&p.return()}finally{if(d)throw f}}var k=!0,g=!1,b=void 0;try{for(var v,S=l[Symbol.iterator]();!(k=(v=S.next()).done);k=!0){var m=v.value;s[m]=a(t[m],e[m],r)}}catch(t){g=!0,b=t}finally{try{!k&&S.return&&S.return()}finally{if(g)throw b}}var w=!0,M=!1,P=void 0;try{for(var A,x=u[Symbol.iterator]();!(w=(A=x.next()).done);w=!0){var L=A.value;s[L]=i.interpolateRgb(t[L],e[L])(r)}}catch(t){M=!0,P=t}finally{try{!w&&x.return&&x.return()}finally{if(M)throw P}}return s.points=t.points.map(function(t,n){var i=o(t,2),l=i[0],u=i[1];return[a(l,e.points[n][0],r),a(u,e.points[n][1],r)]}),s},e.diff=function(t,e){return{update:{vertices:e.vertexIds.filter(function(e){return t.vertices.has(e)}).map(function(r){return{current:t.vertices.get(r),next:e.vertices.get(r)}}),edges:e.edgeIds.filter(function(r){var n=o(r,2),i=n[0],a=n[1];if(!t.edges.has(i)||!t.edges.get(i).has(a))return!1;var l=e.edges.get(i).get(a),u=t.edges.get(i).get(a);return l.type===u.type&&l.points.length===u.points.length}).map(function(r){var n=o(r,2),i=n[0],a=n[1];return{current:t.edges.get(i).get(a),next:e.edges.get(i).get(a)}})},enter:{vertices:e.vertexIds.filter(function(e){return!t.vertices.has(e)}).map(function(t){return e.vertices.get(t)}),edges:e.edgeIds.filter(function(r){var n=o(r,2),i=n[0],a=n[1];if(!t.edges.has(i)||!t.edges.get(i).has(a))return!0;var l=e.edges.get(i).get(a),u=t.edges.get(i).get(a);return l.type!==u.type||l.points.length!==u.points.length}).map(function(t){var r=o(t,2),n=r[0],i=r[1];return e.edges.get(n).get(i)})},exit:{vertices:t.vertexIds.filter(function(t){return!e.vertices.has(t)}).map(function(e){return t.vertices.get(e)}),edges:t.edgeIds.filter(function(r){var n=o(r,2),i=n[0],a=n[1];if(!e.edges.has(i)||!e.edges.get(i).has(a))return!0;var l=e.edges.get(i).get(a),u=t.edges.get(i).get(a);return l.type!==u.type||l.points.length!==u.points.length}).map(function(e){var r=o(e,2),n=r[0],i=r[1];return t.edges.get(n).get(i)})}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var r=[],o=!0,n=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(r.push(a.value),!e||r.length!==e);o=!0);}catch(t){n=!0,i=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(t,e){t.save(),e(),t.restore()},i=function(t,e){var r=e.fillColor,o=e.strokeColor,n=e.strokeWidth;t.fillStyle=r.toString(),t.strokeStyle=o.toString(),t.lineWidth=n},a=function(t,e){var r=e.strokeColor,o=e.strokeWidth;t.strokeStyle=r.toString(),t.lineWidth=o},l=function(t,e){var r=e.labelFillColor,o=e.labelStrokeColor,n=e.labelStrokeWidth;t.fillStyle=r.toString(),t.strokeStyle=o.toString(),t.lineWidth=n},u=function(t,e,r){t.moveTo(-e/2,-r/2),t.lineTo(e/2,-r/2),t.lineTo(e/2,r/2),t.lineTo(-e/2,r/2),t.closePath()},s=function(t,e,r){t.ellipse(0,0,e/2,r/2,0,0,2*Math.PI)},c=(e.renderVertex=function(t,e){var r=e.type,o=e.u,a=e.x,c=e.y,d=e.width,f=e.height,y=e.label,p=e.strokeWidth;n(t,function(){t.translate(a,c),n(t,function(){switch(i(t,e),t.beginPath(),r){case"circle":s(t,d,f);break;case"rect":u(t,d,f)}t.closePath(),t.fill(),p>0&&t.stroke()}),t.addHitRegion&&t.addHitRegion({id:o}),y&&(l(t,e),t.textAlign="center",e.labelStrokeWidth>0&&t.strokeText(y,0,4),t.fillText(y,0,4))})},function(t,e){t.moveTo(e[0][0],e[0][1]);for(var r=1;r<e.length;++r)t.lineTo(e[r][0],e[r][1])}),d=function(t,e){var r=e.length;if(t.moveTo(e[0][0],e[0][1]),2===r)return void t.lineTo(e[1][0],e[1][1]);for(var n=2;n<r-1;++n){var i=o(e[n-1],2),a=i[0],l=i[1],u=o(e[n],2),s=u[0],c=u[1],d=(s-a)/2,f=(c-l)/2;t.quadraticCurveTo(a,l,a+d,l+f)}t.quadraticCurveTo(e[r-2][0],e[r-2][1],e[r-1][0],e[r-1][1])},f=function(t,e){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],n=Math.sqrt(r*r+o*o)/2,i=(e[0][0]+e[1][0])/2,a=(e[0][1]+e[1][1])/2,l=Math.atan2(o,r);t.arc(i,a,n,l,l+Math.PI)};e.renderEdge=function(t,e){var r=e.type,i=e.points,u=e.label,s=e.sourceMarkerShape,y=e.sourceMarkerSize,p=e.targetMarkerShape,h=e.targetMarkerSize;n(t,function(){switch(n(t,function(){switch(a(t,e),t.beginPath(),r){case"arc":f(t,i);break;case"quadratic":d(t,i);break;case"line":c(t,i)}t.stroke()}),s){case"circle":n(t,function(){var r=o(i[0],2),n=r[0],a=r[1],l=y/2;t.fillStyle=e.strokeColor.toString(),t.translate(n,a),t.beginPath(),t.ellipse(0,0,l,l,0,0,2*Math.PI),t.fill()});break;case"triangle":n(t,function(){var r=o(i[0],2),n=r[0],a=r[1],l=o(i[1],2),u=l[0],s=l[1],c=Math.atan2(a-s,n-u),d=2*h/3;t.fillStyle=e.strokeColor.toString(),t.beginPath(),t.moveTo(n+Math.cos(c)*d,a+Math.sin(c)*d),t.lineTo(n+Math.cos(c+2*Math.PI/3)*d,a+Math.sin(c+2*Math.PI/3)*d),t.lineTo(n+Math.cos(c+4*Math.PI/3)*d,a+Math.sin(c+4*Math.PI/3)*d),t.closePath(),t.fill()})}switch(p){case"circle":n(t,function(){var r=o(i[i.length-1],2),n=r[0],a=r[1],l=h/2;t.fillStyle=e.strokeColor.toString(),t.translate(n,a),t.beginPath(),t.ellipse(0,0,l,l,0,0,2*Math.PI),t.fill()});break;case"triangle":n(t,function(){var r=o(i[i.length-1],2),n=r[0],a=r[1],l=o(i[i.length-2],2),u=l[0],s=l[1],c=Math.atan2(a-s,n-u),d=2*h/3;t.fillStyle=e.strokeColor.toString(),t.beginPath(),t.moveTo(n+Math.cos(c)*d,a+Math.sin(c)*d),t.lineTo(n+Math.cos(c+2*Math.PI/3)*d,a+Math.sin(c+2*Math.PI/3)*d),t.lineTo(n+Math.cos(c+4*Math.PI/3)*d,a+Math.sin(c+4*Math.PI/3)*d),t.closePath(),t.fill()})}if(u){var k=(i[0][0]+i[i.length-1][0])/2,g=(i[0][1]+i[i.length-1][1])/2;t.translate(k,g),l(t,e),t.textAlign="center",e.labelStrokeWidth>0&&t.strokeText(u,0,4),t.fillText(u,0,4)}})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zoom=void 0;var o=r(0),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(o),i=r(1),a=function(t,e){var r=new window.CustomEvent("nodemovestart",{detail:{id:e}});t.dispatchEvent(r)},l=function(t,e){var r=e.u,o=e.x,n=e.y,i=new window.CustomEvent("nodemove",{detail:{id:r,x:o,y:n}});t.dispatchEvent(i)},u=function(t,e){var r=new window.CustomEvent("nodemoveend",{detail:{id:e}});t.dispatchEvent(r)};e.zoom=function(t,e){var r={region:null,x0:0,y0:0},o=!1,s=n.zoom();return s.on("start",function(){if(!t.canZoom||t.canDragNode&&n.event.sourceEvent&&n.event.sourceEvent.region){var e=n.event.sourceEvent?n.event.sourceEvent.region:null,o=n.event.transform,i=o.x,l=o.y,u=o.k;r.region=e,r.x0=i/u,r.y0=l/u,e&&a(t,e)}}).on("zoom",function(){var o=n.event.transform,a=o.x,u=o.y,s=o.k;if(t.canDragNode&&r.region){var c=r.region,d=a/s-r.x0,f=u/s-r.y0,y=e.data,p=y.vertices.get(c);p.x+=d,p.y+=f;var h=!0,k=!1,g=void 0;try{for(var b,v=p.outEdges[Symbol.iterator]();!(h=(b=v.next()).done);h=!0){var S=b.value,m=S.points;m[0][0]+=d,m[0][1]+=f,(0,i.adjustEdge)(S,p,y.vertices.get(S.v))}}catch(t){k=!0,g=t}finally{try{!h&&v.return&&v.return()}finally{if(k)throw g}}var w=!0,M=!1,P=void 0;try{for(var A,x=p.inEdges[Symbol.iterator]();!(w=(A=x.next()).done);w=!0){var L=A.value,m=L.points;m[m.length-1][0]+=d,m[m.length-1][1]+=f,(0,i.adjustEdge)(L,y.vertices.get(L.u),p)}}catch(t){M=!0,P=t}finally{try{!w&&x.return&&x.return()}finally{if(M)throw P}}r.x0=a/s,r.y0=u/s,l(t,p)}else!t.canZoom&&n.event.sourceEvent||Object.assign(e.transform,{x:a,y:u,k:s})}).on("end",function(){if(!o&&(!t.canZoom||r.region)){var i=r.region;r.region=null,o=!0,n.select(this).call(s.transform,n.zoomIdentity.translate(e.transform.x,e.transform.y).scale(e.transform.k)),o=!1,i&&u(t,i)}}),s}},function(t,e,r){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){var r=[],o=!0,n=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(r.push(a.value),!e||r.length!==e);o=!0);}catch(t){n=!0,i=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),u=r(0),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),c=r(2),d=r(3),f=r(4),y=r(5),p=r(1),h=function(){return window.devicePixelRatio||1},k=function(){var t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],r=e.split("."),o=!0,n=!1,i=void 0;try{for(var a,l=r[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var u=a.value;if(!t.hasOwnProperty(u)){if(2===arguments.length)throw new Error("Object doesn't have an attribute "+e);return arguments.length<=2?void 0:arguments[2]}t=t[u]}}catch(t){n=!0,i=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw i}}return t},g=new WeakMap,b=function(t,e){var r=g.get(t);r.canvas.width=e*h(),r.canvas.style.width=e+"px"},v=function(t,e){var r=g.get(t);r.canvas.height=e*h(),r.canvas.style.height=e+"px"},S=function(t,e,r){return t.hasAttribute(e)?t.getAttribute(e):r},m=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r={invalidate:!1,originalData:null,canvas:document.createElement("canvas"),data:{vertexIds:[],vertices:new Map,edgeIds:[],edges:new Map},transform:{x:0,y:0,k:1},highlightedVertex:null,layout:{update:{vertices:[],edges:[]},enter:{vertices:[],edges:[]},exit:{vertices:[],edges:[]}},margin:10,layoutTime:0,ease:s.easeCubic};return r.zoom=(0,y.zoom)(t,r),g.set(t,r),s.select(r.canvas).call(r.zoom),r.canvas.addEventListener("mousemove",function(e){t.canDragNode&&e.region?(r.canvas.style.cursor="pointer",r.highlightedVertex=e.region):t.canZoom?(r.canvas.style.cursor="move",r.highlightedVertex=null):r.canvas.style.cursor="default"}),t}return i(e,t),l(e,null,[{key:"observedAttributes",get:function(){return["src","width","height","graph-nodes-property","graph-links-property","node-id-property","node-x-property","node-y-property","node-width-property","node-height-property","node-type-property","node-visibility-property","node-fill-color-property","node-fill-opacity-property","node-stroke-color-property","node-stroke-opacity-property","node-stroke-width-property","node-label-property","node-label-fill-color-property","node-label-fill-opacity-property","node-label-stroke-color-property","node-label-stroke-opacity-property","node-label-stroke-width-property","link-source-property","link-target-property","link-stroke-color-property","link-stroke-opacity-property","link-stroke-width-property","link-visibility-property","link-source-marker-shape-property","link-source-marker-size-property","link-target-marker-shape-property","link-target-marker-size-property","link-label-property","link-label-fill-color-property","link-label-fill-opacity-property","link-label-stroke-color-property","link-label-stroke-opacity-property","link-label-stroke-width-property","default-node-x","default-node-y","default-node-width","default-node-height","default-node-type","default-node-visibility","default-node-fill-color","default-node-fill-opacity","default-node-stroke-color","default-node-stroke-opacity","default-node-stroke-width","default-node-label","default-node-label-fill-color","default-node-label-fill-opacity","default-node-label-stroke-color","default-node-label-stroke-opacity","default-node-label-stroke-width","default-link-stroke-color","default-link-stroke-opacity","default-link-stroke-width","default-link-visibility","default-link-source-marker-shape","default-link-source-marker-size","default-link-target-marker-shape","default-link-target-marker-size","default-link-label","default-link-label-fill-color","default-link-label-fill-opacity","default-link-label-stroke-color","default-link-label-stroke-opacity","default-link-label-stroke-width"]}}]),l(e,[{key:"connectedCallback",value:function(){var t=this,e=g.get(this);this.appendChild(e.canvas);!function r(){e.invalidate&&e.originalData&&t.update(!0),e.invalidate=!1;var o=new Date,n=t.transitionDuration,i=o>e.layoutTime?(o-e.layoutTime)/n:1/n,a=e.ease(i),l=e.canvas.getContext("2d");if(l.save(),l.clearRect(0,0,e.canvas.width,e.canvas.height),l.scale(h(),h()),l.translate(e.margin,e.margin),l.translate(e.transform.x,e.transform.y),l.scale(e.transform.k,e.transform.k),a<1){l.globalAlpha=1-a;var u=!0,s=!1,c=void 0;try{for(var y,p=e.layout.exit.edges[Symbol.iterator]();!(u=(y=p.next()).done);u=!0){var k=y.value;(0,f.renderEdge)(l,k)}}catch(t){s=!0,c=t}finally{try{!u&&p.return&&p.return()}finally{if(s)throw c}}}l.globalAlpha=Math.min(1,a);var g=!0,b=!1,v=void 0;try{for(var S,m=e.layout.enter.edges[Symbol.iterator]();!(g=(S=m.next()).done);g=!0){var w=S.value;(0,f.renderEdge)(l,w)}}catch(t){b=!0,v=t}finally{try{!g&&m.return&&m.return()}finally{if(b)throw v}}l.globalAlpha=1;var M=!0,P=!1,A=void 0;try{for(var x,L=e.layout.update.edges[Symbol.iterator]();!(M=(x=L.next()).done);M=!0){var C=x.value,O=C.current,T=C.next;a<1?(0,f.renderEdge)(l,(0,d.interpolateEdge)(O,T,a)):(0,f.renderEdge)(l,T)}}catch(t){P=!0,A=t}finally{try{!M&&L.return&&L.return()}finally{if(P)throw A}}if(a<1){l.globalAlpha=1-a;var W=!0,z=!1,E=void 0;try{for(var N,I=e.layout.exit.vertices[Symbol.iterator]();!(W=(N=I.next()).done);W=!0){var F=N.value;(0,f.renderVertex)(l,F)}}catch(t){z=!0,E=t}finally{try{!W&&I.return&&I.return()}finally{if(z)throw E}}}l.globalAlpha=Math.min(1,a);var j=!0,_=!1,D=void 0;try{for(var V,H=e.layout.enter.vertices[Symbol.iterator]();!(j=(V=H.next()).done);j=!0){var R=V.value;(0,f.renderVertex)(l,R)}}catch(t){_=!0,D=t}finally{try{!j&&H.return&&H.return()}finally{if(_)throw D}}l.globalAlpha=1;var q=!0,Z=!1,X=void 0;try{for(var Y,B=e.layout.update.vertices[Symbol.iterator]();!(q=(Y=B.next()).done);q=!0){var $=Y.value,U=$.current,G=$.next;a<1?(0,f.renderVertex)(l,(0,d.interpolateVertex)(U,G,a)):(0,f.renderVertex)(l,G)}}catch(t){Z=!0,X=t}finally{try{!q&&B.return&&B.return()}finally{if(Z)throw X}}l.restore(),window.requestAnimationFrame(r)}()}},{key:"attributeChangedCallback",value:function(t,e,r){var o=this;switch(t){case"src":window.fetch(r).then(function(t){return t.json()}).then(function(t){o.dispatchEvent(new window.CustomEvent("datafetchend",{detail:t})),o.load(t)});break;case"width":b(this,r);break;case"height":v(this,r);break;default:this.invalidate()}}},{key:"center",value:function(){var t=g.get(this),e=t.canvas,r=t.data,o=t.margin,n=t.zoom,i=(0,c.layoutRect)(r),a=i.layoutWidth,l=i.layoutHeight,u=i.left,d=i.top,f=e.width/h(),y=e.height/h(),p=(0,c.centerTransform)(a,l,u,d,f,y,o),k=p.x,b=p.y,v=p.k;return n.transform(s.select(e),s.zoomIdentity.translate(k,b).scale(v).translate(-u,-d)),this}},{key:"load",value:function(t){return g.get(this).originalData=t,this.update()}},{key:"update",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=g.get(this);r.prevData=r.data;var o=r.originalData,n=k(o,this.graphNodesProperty).filter(function(e){return k(e,t.nodeVisibilityProperty,t.defaultNodeVisibility)}).map(function(o,n){var i=s.color(k(o,t.nodeFillColorProperty,t.defaultNodeFillColor));i.opacity=+k(o,t.nodeFillOpacityProperty,t.defaultNodeFillOpacity);var a=s.color(k(o,t.nodeStrokeColorProperty,t.defaultNodeStrokeColor));a.opacity=+k(o,t.nodeStrokeOpacityProperty,t.defaultNodeStrokeOpacity);var l=s.color(k(o,t.nodeLabelFillColorProperty,t.defaultNodeLabelFillColor));l.opacity=+k(o,t.nodeLabelFillOpacityProperty,t.defaultNodeLabelFillOpacity);var u=s.color(k(o,t.nodeLabelStrokeColorProperty,t.defaultNodeLabelStrokeColor));u.opacity=+k(o,t.nodeLabelStrokeOpacityProperty,t.defaultNodeLabelStrokeOpacity);var c=("$index"===t.nodeIdProperty?n:k(o,t.nodeIdProperty)).toString();return{u:c,x:e&&r.prevData.vertices.has(c)?r.prevData.vertices.get(c).x:+k(o,t.nodeXProperty,t.defaultNodeX),y:e&&r.prevData.vertices.has(c)?r.prevData.vertices.get(c).y:+k(o,t.nodeYProperty,t.defaultNodeY),width:+k(o,t.nodeWidthProperty,t.defaultNodeWidth),height:+k(o,t.nodeHeightProperty,t.defaultNodeHeight),type:k(o,t.nodeTypeProperty,t.defaultNodeType),fillColor:i,strokeColor:a,strokeWidth:+k(o,t.nodeStrokeWidthProperty,t.defaultNodeStrokeWidth),label:k(o,t.nodeLabelProperty,t.defaultNodeLabel),labelFillColor:l,labelStrokeColor:u,labelStrokeWidth:+k(o,t.nodeLabelStrokeWidthProperty,t.defaultNodeLabelStrokeWidth),inEdges:[],outEdges:[],d:o}}),i=new Map(n.map(function(t,e){return[t.u,e]})),l=k(o,this.graphLinksProperty).filter(function(e){return k(e,t.linkVisibilityProperty,t.defaultLinkVisibility)}).filter(function(e){var r=k(e,t.linkSourceProperty).toString(),o=k(e,t.linkTargetProperty).toString();return i.has(r)&&i.has(o)}).map(function(o){var l=k(o,t.linkSourceProperty).toString(),u=k(o,t.linkTargetProperty).toString(),c=s.color(k(o,t.linkStrokeColorProperty,t.defaultLinkStrokeColor));c.opacity=+k(o,t.linkStrokeOpacityProperty,t.defaultLinkStrokeOpacity);var d=s.color(k(o,t.linkLabelFillColorProperty,t.defaultLinkLabelFillColor));d.opacity=+k(o,t.linkLabelFillOpacityProperty,t.defaultLinkLabelFillOpacity);var f=s.color(k(o,t.linkLabelStrokeColorProperty,t.defaultLinkLabelStrokeColor));f.opacity=+k(o,t.linkLabelStrokeOpacityProperty,t.defaultLinkLabelStrokeOpacity);var y=n[i.get(l)],p=n[i.get(u)],h=[[y.x,y.y]],g=!0,b=!1,v=void 0;try{for(var S,m=k(o,t.linkBendsProperty,[])[Symbol.iterator]();!(g=(S=m.next()).done);g=!0){var w=S.value,M=a(w,2),P=M[0],A=M[1];h.push([P,A])}}catch(t){b=!0,v=t}finally{try{!g&&m.return&&m.return()}finally{if(b)throw v}}h.push([p.x,p.y]);var x=e&&r.prevData.edges.has(l)&&r.prevData.edges.get(l).has(u)?r.prevData.edges.get(l).get(u).points:h,L={u:l,v:u,points:x,type:k(o,t.linkTypeProperty,t.defaultLinkType),strokeColor:c,strokeWidth:+k(o,t.linkStrokeWidthProperty,t.defaultLinkStrokeWidth),sourceMarkerShape:k(o,t.linkSourceMarkerShapeProperty,t.defaultLinkSourceMarkerShape),sourceMarkerSize:+k(o,t.linkSourceMarkerSizeProperty,t.defaultLinkSourceMarkerSize),targetMarkerShape:k(o,t.linkTargetMarkerShapeProperty,t.defaultLinkTargetMarkerShape),targetMarkerSize:+k(o,t.linkTargetMarkerSizeProperty,t.defaultLinkTargetMarkerSize),label:k(o,t.linkLabelProperty,t.defaultLinkLabel),labelFillColor:d,labelStrokeColor:f,labelStrokeWidth:+k(o,t.linkLabelStrokeWidthProperty,t.defaultLinkLabelStrokeWidth),d:o};return y.outEdges.push(L),p.inEdges.push(L),L});r.data={vertexIds:n.map(function(t){return t.u}),vertices:new Map(n.map(function(t){return[t.u,t]})),edgeIds:l.map(function(t){return[t.u,t.v]}),edges:new Map(n.map(function(t){return[t.u,new Map]}))};var u=!0,c=!1,f=void 0;try{for(var y,h=l[Symbol.iterator]();!(u=(y=h.next()).done);u=!0){var b=y.value;r.data.edges.get(b.u).set(b.v,b)}}catch(t){c=!0,f=t}finally{try{!u&&h.return&&h.return()}finally{if(c)throw f}}this.onLayout(r.data);var v=!0,S=!1,m=void 0;try{for(var w,M=r.data.edgeIds[Symbol.iterator]();!(v=(w=M.next()).done);v=!0){var P=w.value,A=a(P,2),x=A[0],L=A[1],C=r.data.edges.get(x).get(L),O=r.data.vertices.get(x),T=r.data.vertices.get(L);(0,p.adjustEdge)(C,O,T)}}catch(t){S=!0,m=t}finally{try{!v&&M.return&&M.return()}finally{if(S)throw m}}return r.layout=(0,d.diff)(r.prevData,r.data),r.layoutTime=new Date,this.autoCentering&&this.center(),this}},{key:"onLayout",value:function(){}},{key:"invalidate",value:function(){g.get(this).invalidate=!0}},{key:"autoUpdate",get:function(){return!this.hasAttribute("no-auto-update")},set:function(t){t?this.removeAttribute("no-auto-update"):this.setAttribute("no-auto-update","")}},{key:"autoCentering",get:function(){return!this.hasAttribute("no-auto-centering")},set:function(t){t?this.removeAttribute("no-auto-centering"):this.setAttribute("no-auto-centering","")}},{key:"canZoom",get:function(){return!this.hasAttribute("no-zoom")},set:function(t){t?this.removeAttribute("no-zoom"):this.setAttribute("no-zoom","")}},{key:"canDragNode",get:function(){return!this.hasAttribute("no-drag-node")},set:function(t){t?this.removeAttribute("no-drag-node"):this.setAttribute("no-drag-node","")}},{key:"src",get:function(){return S(this,"src",null)},set:function(t){this.setAttribute("src",t)}},{key:"width",get:function(){return S(this,"width",300)},set:function(t){this.setAttribute("width",t)}},{key:"height",get:function(){return S(this,"height",150)},set:function(t){this.setAttribute("height",t)}},{key:"transitionDuration",get:function(){return S(this,"transition-duration",0)},set:function(t){this.setAttribute("transition-duration",t)}},{key:"graphNodesProperty",get:function(){return S(this,"graph-nodes-property","nodes")},set:function(t){this.setAttribute("graph-nodes-property",t)}},{key:"graphLinksProperty",get:function(){return S(this,"graph-links-property","links")},set:function(t){this.setAttribute("graph-links-property",t)}},{key:"nodeIdProperty",get:function(){return S(this,"node-id-property","$index")},set:function(t){this.setAttribute("node-id-property",t)}},{key:"nodeXProperty",get:function(){return S(this,"node-x-property","x")},set:function(t){this.setAttribute("node-x-property",t)}},{key:"nodeYProperty",get:function(){return S(this,"node-y-property","y")},set:function(t){this.setAttribute("node-y-property",t)}},{key:"nodeWidthProperty",get:function(){return S(this,"node-width-property","width")},set:function(t){this.setAttribute("node-width-property",t)}},{key:"nodeHeightProperty",get:function(){return S(this,"node-height-property","height")},set:function(t){this.setAttribute("node-height-property",t)}},{key:"nodeFillColorProperty",get:function(){return S(this,"node-fill-color-property","fillColor")},set:function(t){this.setAttribute("node-fill-color-property",t)}},{key:"nodeFillOpacityProperty",get:function(){return S(this,"node-fill-opacity-property","fillOpacity")},set:function(t){this.setAttribute("node-fill-opacity-property",t)}},{key:"nodeStrokeColorProperty",get:function(){return S(this,"node-stroke-color-property","strokeColor")},set:function(t){this.setAttribute("node-stroke-color-property",t)}},{key:"nodeStrokeOpacityProperty",get:function(){return S(this,"node-stroke-opacity-property","strokeOpacity")},set:function(t){this.setAttribute("node-stroke-opacity-property",t)}},{key:"nodeStrokeWidthProperty",get:function(){return S(this,"node-stroke-width-property","strokeWidth")},set:function(t){this.setAttribute("node-stroke-width-property",t)}},{key:"nodeTypeProperty",get:function(){return S(this,"node-type-property","type")},set:function(t){this.setAttribute("node-type-property",t)}},{key:"nodeVisibilityProperty",get:function(){return S(this,"node-visibility-property","visibility")},set:function(t){this.setAttribute("node-visibility-property",t)}},{key:"nodeLabelProperty",get:function(){return S(this,"node-label-property","label")},set:function(t){this.setAttribute("node-label-property",t)}},{key:"nodeLabelFillColorProperty",get:function(){return S(this,"node-label-fill-color-property","labelFillColor")},set:function(t){this.setAttribute("node-label-fill-color-property",t)}},{key:"nodeLabelFillOpacityProperty",get:function(){return S(this,"node-label-fill-opacity-property","labelFillOpacity")},set:function(t){this.setAttribute("node-label-fill-opacity-property",t)}},{key:"nodeLabelStrokeColorProperty",get:function(){return S(this,"node-label-stroke-color-property","labelStrokeColor")},set:function(t){this.setAttribute("node-label-stroke-color-property",t)}},{key:"nodeLabelStrokeOpacityProperty",get:function(){return S(this,"node-label-stroke-opacity-property","labelStrokeOpacity")},set:function(t){this.setAttribute("node-label-stroke-opacity-property",t)}},{key:"nodeLabelStrokeWidthProperty",get:function(){return S(this,"node-label-stroke-width-property","labelStrokeWidth")},set:function(t){this.setAttribute("node-label-stroke-width-property",t)}},{key:"linkSourceProperty",get:function(){return S(this,"link-source-property","source")},set:function(t){this.setAttribute("link-source-property",t)}},{key:"linkTargetProperty",get:function(){return S(this,"link-target-property","target")},set:function(t){this.setAttribute("link-target-property",t)}},{key:"linkBendsProperty",get:function(){return S(this,"link-bends-property","bends")},set:function(t){this.setAttribute("link-bends-property",t)}},{key:"linkStrokeColorProperty",get:function(){return S(this,"link-stroke-color-property","strokeColor")},set:function(t){this.setAttribute("link-stroke-color-property",t)}},{key:"linkStrokeOpacityProperty",get:function(){return S(this,"link-stroke-opacity-property","strokeOpacity")},set:function(t){this.setAttribute("link-stroke-opacity-property",t)}},{key:"linkStrokeWidthProperty",get:function(){return S(this,"link-stroke-width-property","strokeWidth")},set:function(t){this.setAttribute("link-stroke-width-property",t)}},{key:"linkTypeProperty",get:function(){return S(this,"link-type-property","type")},set:function(t){this.setAttribute("link-type-property",t)}},{key:"linkVisibilityProperty",get:function(){return S(this,"link-visibility-property","visibility")},set:function(t){this.setAttribute("link-visibility-property",t)}},{key:"linkSourceMarkerShapeProperty",get:function(){return S(this,"link-source-marker-shape-property","sourceMarkerShape")},set:function(t){this.setAttribute("link-source-marker-shape-property",t)}},{key:"linkSourceMarkerSizeProperty",get:function(){return S(this,"link-source-marker-size-property","sourceMarkerSize")},set:function(t){this.setAttribute("link-source-marker-size-property",t)}},{key:"linkTargetMarkerShapeProperty",get:function(){return S(this,"link-target-marker-shape-property","targetMarkerShape")},set:function(t){this.setAttribute("link-target-marker-shape-property",t)}},{key:"linkTargetMarkerSizeProperty",get:function(){return S(this,"link-target-marker-size-property","targetMarkerSize")},set:function(t){this.setAttribute("link-target-marker-size-property",t)}},{key:"linkLabelProperty",get:function(){return S(this,"link-label-property","label")},set:function(t){this.setAttribute("link-label-property",t)}},{key:"linkLabelFillColorProperty",get:function(){return S(this,"link-label-fill-color-property","labelFillColor")},set:function(t){this.setAttribute("link-label-fill-color-property",t)}},{key:"linkLabelFillOpacityProperty",get:function(){return S(this,"link-label-fill-opacity-property","labelFillOpacity")},set:function(t){this.setAttribute("link-label-fill-opacity-property",t)}},{key:"linkLabelStrokeColorProperty",get:function(){return S(this,"link-label-stroke-color-property","labelStrokeColor")},set:function(t){this.setAttribute("link-label-stroke-color-property",t)}},{key:"linkLabelStrokeOpacityProperty",get:function(){return S(this,"link-label-stroke-opacity-property","labelStrokeOpacity")},set:function(t){this.setAttribute("link-label-stroke-opacity-property",t)}},{key:"linkLabelStrokeWidthProperty",get:function(){return S(this,"link-label-stroke-width-property","labelStrokeWidth")},set:function(t){this.setAttribute("link-label-stroke-width-property",t)}},{key:"defaultNodeX",get:function(){return S(this,"default-node-x",0)},set:function(t){this.setAttribute("default-node-x",t)}},{key:"defaultNodeY",get:function(){return S(this,"default-node-y",0)},set:function(t){this.setAttribute("default-node-y",t)}},{key:"defaultNodeWidth",get:function(){return S(this,"default-node-width",10)},set:function(t){this.setAttribute("default-node-width",t)}},{key:"defaultNodeHeight",get:function(){return S(this,"default-node-height",10)},set:function(t){this.setAttribute("default-node-height",t)}},{key:"defaultNodeFillColor",get:function(){return S(this,"default-node-fill-color","#fff")},set:function(t){this.setAttribute("default-node-fill-color",t)}},{key:"defaultNodeFillOpacity",get:function(){return S(this,"default-node-fill-opacity",1)},set:function(t){this.setAttribute("default-node-fill-opacity",t)}},{key:"defaultNodeStrokeColor",get:function(){return S(this,"default-node-stroke-color","#000")},set:function(t){this.setAttribute("default-node-stroke-color",t)}},{key:"defaultNodeStrokeOpacity",get:function(){return S(this,"default-node-stroke-opacity",1)},set:function(t){this.setAttribute("default-node-stroke-opacity",t)}},{key:"defaultNodeStrokeWidth",get:function(){return S(this,"default-node-stroke-width",1)},set:function(t){this.setAttribute("default-node-stroke-width",t)}},{key:"defaultNodeType",get:function(){return S(this,"default-node-type","circle")},set:function(t){this.setAttribute("default-node-type",t)}},{key:"defaultNodeVisibility",get:function(){return S(this,"default-node-visibility",!0)},set:function(t){this.setAttribute("default-node-visibility",t)}},{key:"defaultNodeLabel",get:function(){return S(this,"default-node-label","")},set:function(t){this.setAttribute("default-node-label",t)}},{key:"defaultNodeLabelFillColor",get:function(){return S(this,"default-node-label-fill-color","#000")},set:function(t){this.setAttribute("default-node-label-fill-color",t)}},{key:"defaultNodeLabelFillOpacity",get:function(){return S(this,"default-node-label-fill-opacity",1)},set:function(t){this.setAttribute("default-node-label-fill-opacity",t)}},{key:"defaultNodeLabelStrokeColor",get:function(){return S(this,"default-node-label-stroke-color","#fff")},set:function(t){this.setAttribute("default-node-label-stroke-color",t)}},{key:"defaultNodeLabelStrokeOpacity",get:function(){return S(this,"default-node-label-stroke-opacity",1)},set:function(t){this.setAttribute("default-node-label-stroke-opacity",t)}},{key:"defaultNodeLabelStrokeWidth",get:function(){return S(this,"default-node-label-stroke-width",0)},set:function(t){this.setAttribute("default-node-label-stroke-width",t)}},{key:"defaultLinkStrokeColor",get:function(){return S(this,"default-link-stroke-color","#000")},set:function(t){this.setAttribute("default-link-stroke-color",t)}},{key:"defaultLinkStrokeOpacity",get:function(){return S(this,"default-link-stroke-opacity",1)},set:function(t){this.setAttribute("default-link-stroke-opacity",t)}},{key:"defaultLinkStrokeWidth",get:function(){return S(this,"default-link-stroke-width",1)},set:function(t){this.setAttribute("default-link-stroke-width",t)}},{key:"defaultLinkType",get:function(){return S(this,"default-link-type","line")},set:function(t){this.setAttribute("default-link-type",t)}},{key:"defaultLinkVisibility",get:function(){return S(this,"default-link-visibility",!0)},set:function(t){this.setAttribute("default-link-visibility",t)}},{key:"defaultLinkSourceMarkerShape",get:function(){return S(this,"default-link-source-marker-shape","none")},set:function(t){this.setAttribute("default-link-source-marker-shape",t)}},{key:"defaultLinkSourceMarkerSize",get:function(){return S(this,"default-link-source-marker-size",5)},set:function(t){this.setAttribute("default-link-source-marker-size",t)}},{key:"defaultLinkTargetMarkerShape",get:function(){return S(this,"default-link-target-marker-shape","none")},set:function(t){this.setAttribute("default-link-target-marker-shape",t)}},{key:"defaultLinkTargetMarkerSize",get:function(){return S(this,"default-link-target-marker-size",5)},set:function(t){this.setAttribute("default-link-target-marker-size",t)}},{key:"defaultLinkLabel",get:function(){return S(this,"default-link-label","")},set:function(t){this.setAttribute("default-link-label",t)}},{key:"defaultLinkLabelFillColor",get:function(){return S(this,"default-link-label-fill-color","#000")},set:function(t){this.setAttribute("default-link-label-fill-color",t)}},{key:"defaultLinkLabelFillOpacity",get:function(){return S(this,"default-link-label-fill-opacity",1)},set:function(t){this.setAttribute("default-link-label-fill-opacity",t)}},{key:"defaultLinkLabelStrokeColor",get:function(){return S(this,"default-link-label-stroke-color","#fff")},set:function(t){this.setAttribute("default-link-label-stroke-color",t)}},{key:"defaultLinkLabelStrokeOpacity",get:function(){return S(this,"default-link-label-stroke-opacity",1)},set:function(t){this.setAttribute("default-link-label-stroke-opacity",t)}},{key:"defaultLinkLabelStrokeWidth",get:function(){return S(this,"default-link-label-stroke-width",0)},set:function(t){this.setAttribute("default-link-label-stroke-width",t)}},{key:"data",get:function(){return g.get(this).originalData}}]),e}(window.HTMLElement);window.customElements.define("eg-renderer",m)}]);